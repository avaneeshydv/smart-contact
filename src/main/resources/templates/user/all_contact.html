<!DOCTYPE html>
<html lang="en" th="https://www.thymeleaf.org" th:replace="user/base_user::layout(~{::section})">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <section>
        <!--Alert message-->
        <div th:if="${session.message}" th:classappend="${session.message.type}" class="text-center alert mr-3" role="alert">
            <p th:text="${session.message.content}"></p>
            <th:block th:text="${#session.removeAttribute('message')}"></th:block>
        </div>

        <div class="accordion mr-3 ml-3" style="background-color: white;">
            <div class=" table-responsive ">
                <table class="table table-hover ">
                    <thead class="bg-primary " style="color: white; ">
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Email</th>
                            <th scope="col">Phone</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="contact : ${contacts}">
                            <td>
                                <img class="contact_profile" name="imageUrl" th:src="'/image/'+${contact.imageUrl}" alt="profile Image">
                                <span th:text="${contact.name + ' ('+ contact.nickname} + ')' ">name</span>
                            </td>
                            <td th:text="${contact.email}">email</td>
                            <td th:text="${contact.phone}">phone</td>
                            <td>
                                <a th:href="@{/user/delete(contactId = ${contact.contactId})}"><i class="fas fa-trash-alt" style="color: black;"></i></a>
                                <a th:href="@{/user/update(contactId = ${contact.contactId})}"><i class="far fa-edit ml-3" style="color: black;"></i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <nav aria-label="page navigation">
                    <ul class="pagination w-5">
                        <li class="page-item" th:if="${currentPage  != 0}">
                            <a class="page-link" th:href="@{'/user/all-contact/'+${currentPage-1}}">Previous</a>
                        </li>
                        <li class="page-item" th:each=" i : ${#numbers.sequence(1, totalPages)}" th:classappend="${currentPage == i-1 ? 'active' : ''}">
                            <a class="page-link" th:href="@{'/user/all-contact/'+${i-1}}"><span th:text="${i}"></span></a>
                        </li>
                        <li class="page-item" th:if="${currentPage + 1 != totalPages}">
                            <a class="page-link" th:href="@{'/user/all-contact/'+${currentPage+1}}">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

    </section>
</body>

</html>